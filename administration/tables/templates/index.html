{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reception Table - {{ month_name }} {{ year }}</title>
    <link rel="stylesheet" href="{% static 'reception/styles.css' %}">
</head>
<body>
    <nav class="navigation">
        <h1>Hotel Reception - {{ month_name }} {{ year }}</h1>
        
        <div class="nav-links">
            <a href="{% url 'admin:reception_room_add' %}" class="button">Add Room</a>
            <a href="{% url 'admin:reception_booking_add' %}" class="button">Add Booking</a>
            <a href="{% url 'admin:index' %}" class="button">Admin</a>
            
            <div class="month-navigation">
                <a href="?year={{ prev_year }}&month={{ prev_month }}" class="button">← Previous</a>
                <span>{{ month_name }} {{ year }}</span>
                <a href="?year={{ next_year }}&month={{ next_month }}" class="button">Next →</a>
            </div>
        </div>
    </nav>

    <div class="table-container">
        <table class="booking-table">
            <thead>
                <tr>
                    <th colspan="{{ days_in_month|length|add:1 }}" class="month-header">
                        {{ month_name }} {{ year }}
                    </th>
                </tr>
                <tr>
                    <th class="room-header">Room Number</th>
                    {% for day in days_in_month %}
                        <th class="day-header {% if day.day == 1 %}first-day{% endif %}">
                            {{ day.day }}<br>{{ day|date:"D" }}
                        </th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for room in rooms %}
                <tr>
                    <td class="room-cell">
                        <strong>Room {{ room.room_number }}</strong><br>
                        <small>{{ room.room_type|default:"Standard" }} ({{ room.capacity }} pax)</small>
                    </td>
                    {% for day in days_in_month %}
                        <td class="day-cell {% for booking in bookings %}{% if booking.room == room and booking.is_active_on_date(day) %}booked booking-{{ booking.status }}{% endif %}{% endfor %}">
                            {% for booking in bookings %}
                                {% if booking.room == room and booking.is_active_on_date(day) %}
                                    {% if day == booking.check_in_date %}
                                        <div class="booking-info" title="{{ booking.guest_name }} ({{ booking.check_in_date }} to {{ booking.check_out_date }})">
                                            {{ booking.guest_name|truncatechars:10 }}
                                        </div>
                                    {% endif %}
                                {% endif %}
                            {% endfor %}
                        </td>
                    {% endfor %}
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</body>
</html>